100 blocks: no issues in backend. just reading off cache
a2k@A2K:~/dev/rust/api2/k6$ k6 run 2-moreBlocks.js --duration 10s

          /\      |‾‾| /‾‾/   /‾‾/   
     /\  /  \     |  |/  /   /  /    
    /  \/    \    |     (   /   ‾‾\  
   /          \   |  |\  \ |  (‾)  | 
  / __________ \  |__| \__\ \_____/ .io

  execution: local
     script: 2-moreBlocks.js
     output: -

  scenarios: (100.00%) 1 scenario, 1 max VUs, 40s max duration (incl. graceful stop):
           * default: 1 looping VUs for 10s (gracefulStop: 30s)


     data_received..................: 2.7 kB 270 B/s
     data_sent......................: 1.5 kB 146 B/s
     http_req_blocked...............: avg=23.74µs  min=4.33µs   med=9.53µs   max=153.03µs p(90)=26.61µs  p(95)=89.82µs 
     http_req_connecting............: avg=8.45µs   min=0s       med=0s       max=84.58µs  p(90)=8.45µs   p(95)=46.52µs 
     http_req_duration..............: avg=2.22ms   min=1.03ms   med=2.41ms   max=3.18ms   p(90)=2.54ms   p(95)=2.86ms  
       { expected_response:true }...: avg=2.22ms   min=1.03ms   med=2.41ms   max=3.18ms   p(90)=2.54ms   p(95)=2.86ms  
     http_req_failed................: 0.00%  ✓ 0        ✗ 10 
     http_req_receiving.............: avg=116.75µs min=46.36µs  med=117.94µs max=161.05µs p(90)=160.24µs p(95)=160.64µs
     http_req_sending...............: avg=44.83µs  min=15.75µs  med=48.16µs  max=52.44µs  p(90)=51.91µs  p(95)=52.17µs 
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s       p(95)=0s      
     http_req_waiting...............: avg=2.06ms   min=975.59µs med=2.22ms   max=3.02ms   p(90)=2.38ms   p(95)=2.7ms   
     http_reqs......................: 10     0.996861/s
     iteration_duration.............: avg=1s       min=1s       med=1s       max=1s       p(90)=1s       p(95)=1s      
     iterations.....................: 10     0.996861/s
     vus............................: 1      min=1      max=1
     vus_max........................: 1      min=1      max=1


running (10.0s), 0/1 VUs, 10 complete and 0 interrupted iterations
default ✓ [======================================] 1 VUs  10s



-----------------------------------------------------------
1000 blocks:



Error fetching logs: error sending request for url (https://eth-mainnet.g.alchemy.com/v2/84GnvlKF-rAfskHdmivKpipIoSLF033I): error trying to connect: tcp open error: Too many open files (os error 24)
This only popped up once. Other than that, seemed to work fine.

a2k@A2K:~/dev/rust/api2/k6$ k6 run 2-moreBlocks.js --duration 10s

          /\      |‾‾| /‾‾/   /‾‾/   
     /\  /  \     |  |/  /   /  /    
    /  \/    \    |     (   /   ‾‾\  
   /          \   |  |\  \ |  (‾)  | 
  / __________ \  |__| \__\ \_____/ .io

  execution: local
     script: 2-moreBlocks.js
     output: -

  scenarios: (100.00%) 1 scenario, 1 max VUs, 40s max duration (incl. graceful stop):
           * default: 1 looping VUs for 10s (gracefulStop: 30s)


     data_received..................: 2.7 kB 271 B/s
     data_sent......................: 1.5 kB 146 B/s
     http_req_blocked...............: avg=22.5µs   min=3.03µs   med=4.31µs   max=184.7µs  p(90)=26.68µs p(95)=105.69µs
     http_req_connecting............: avg=12.7µs   min=0s       med=0s       max=127.03µs p(90)=12.7µs  p(95)=69.86µs 
     http_req_duration..............: avg=967.99µs min=542.35µs med=812.77µs max=2.25ms   p(90)=1.47ms  p(95)=1.86ms  
       { expected_response:true }...: avg=967.99µs min=542.35µs med=812.77µs max=2.25ms   p(90)=1.47ms  p(95)=1.86ms  
     http_req_failed................: 0.00%  ✓ 0       ✗ 10 
     http_req_receiving.............: avg=56.02µs  min=35.75µs  med=47.64µs  max=122.53µs p(90)=74.8µs  p(95)=98.66µs 
     http_req_sending...............: avg=26.4µs   min=11.08µs  med=18.75µs  max=53.23µs  p(90)=45.24µs p(95)=49.23µs 
     http_req_tls_handshaking.......: avg=0s       min=0s       med=0s       max=0s       p(90)=0s      p(95)=0s      
     http_req_waiting...............: avg=885.57µs min=495.51µs med=735.94µs max=2.09ms   p(90)=1.37ms  p(95)=1.73ms  
     http_reqs......................: 10     0.99817/s
     iteration_duration.............: avg=1s       min=1s       med=1s       max=1s       p(90)=1s      p(95)=1s      
     iterations.....................: 10     0.99817/s
     vus............................: 1      min=1     max=1
     vus_max........................: 1      min=1     max=1


running (10.0s), 0/1 VUs, 10 complete and 0 interrupted iterations
default ✓ [======================================] 1 VUs  10s


----------------------------------------------------------

5k blocks:
getting more errors like  these..
Error fetching logs: error sending request for url (https://eth-mainnet.g.alchemy.com/v2/84GnvlKF-rAfskHdmivKpipIoSLF033I): error trying to connect: dns error: Device or resource busy (os error 16)
Error fetching logs: error sending request for url (https://eth-mainnet.g.alchemy.com/v2/84GnvlKF-rAfskHdmivKpipIoSLF033I): error trying to connect: tcp open error: Too many open files (os error 24)

a2k@A2K:~/dev/rust/api2/k6$ k6 run 2-moreBlocks.js --duration 10s

          /\      |‾‾| /‾‾/   /‾‾/   
     /\  /  \     |  |/  /   /  /    
    /  \/    \    |     (   /   ‾‾\  
   /          \   |  |\  \ |  (‾)  | 
  / __________ \  |__| \__\ \_____/ .io

  execution: local
     script: 2-moreBlocks.js
     output: -

  scenarios: (100.00%) 1 scenario, 1 max VUs, 40s max duration (incl. graceful stop):
           * default: 1 looping VUs for 10s (gracefulStop: 30s)


     data_received..................: 2.7 kB 270 B/s
     data_sent......................: 1.5 kB 146 B/s
     http_req_blocked...............: avg=21.84µs min=3.86µs   med=8.65µs  max=150.6µs  p(90)=27.4µs  p(95)=89µs    
     http_req_connecting............: avg=9.88µs  min=0s       med=0s      max=98.8µs   p(90)=9.88µs  p(95)=54.34µs 
     http_req_duration..............: avg=1.55ms  min=579.95µs med=1.27ms  max=2.78ms   p(90)=2.62ms  p(95)=2.7ms   
       { expected_response:true }...: avg=1.55ms  min=579.95µs med=1.27ms  max=2.78ms   p(90)=2.62ms  p(95)=2.7ms   
     http_req_failed................: 0.00%  ✓ 0        ✗ 10 
     http_req_receiving.............: avg=94.03µs min=34.45µs  med=82.97µs max=163.01µs p(90)=149.3µs p(95)=156.16µs
     http_req_sending...............: avg=34.08µs min=12.98µs  med=36.78µs max=67.45µs  p(90)=51.01µs p(95)=59.23µs 
     http_req_tls_handshaking.......: avg=0s      min=0s       med=0s      max=0s       p(90)=0s      p(95)=0s      
     http_req_waiting...............: avg=1.43ms  min=531.93µs med=1.16ms  max=2.61ms   p(90)=2.41ms  p(95)=2.51ms  
     http_reqs......................: 10     0.997728/s
     iteration_duration.............: avg=1s      min=1s       med=1s      max=1s       p(90)=1s      p(95)=1s      
     iterations.....................: 10     0.997728/s
     vus............................: 1      min=1      max=1
     vus_max........................: 1      min=1      max=1


running (10.0s), 0/1 VUs, 10 complete and 0 interrupted iterations
default ✓ [======================================] 1 VUs  10s


=============================
after implementing throttling
================================

1000 blocks-------------------------------
k6 output looks ok
backend did not have issues
completion did take several seconds longer after k6 completed

a2k@A2K:~/dev/rust/api2/k6$ k6 run 2-moreBlocks.js --duration 10s

          /\      |‾‾| /‾‾/   /‾‾/   
     /\  /  \     |  |/  /   /  /    
    /  \/    \    |     (   /   ‾‾\  
   /          \   |  |\  \ |  (‾)  | 
  / __________ \  |__| \__\ \_____/ .io

  execution: local
     script: 2-moreBlocks.js
     output: -

  scenarios: (100.00%) 1 scenario, 1 max VUs, 40s max duration (incl. graceful stop):
           * default: 1 looping VUs for 10s (gracefulStop: 30s)


     data_received..................: 2.7 kB 270 B/s
     data_sent......................: 1.5 kB 146 B/s
     http_req_blocked...............: avg=30.58µs min=2.71µs   med=7.09µs  max=244.33µs p(90)=35.52µs  p(95)=139.92µs
     http_req_connecting............: avg=13.18µs min=0s       med=0s      max=131.86µs p(90)=13.18µs  p(95)=72.52µs 
     http_req_duration..............: avg=1.32ms  min=505.99µs med=1.05ms  max=2.65ms   p(90)=2.35ms   p(95)=2.5ms   
       { expected_response:true }...: avg=1.32ms  min=505.99µs med=1.05ms  max=2.65ms   p(90)=2.35ms   p(95)=2.5ms   
     http_req_failed................: 0.00%  ✓ 0        ✗ 10 
     http_req_receiving.............: avg=92.07µs min=33.2µs   med=75.52µs max=217.6µs  p(90)=158.72µs p(95)=188.16µs
     http_req_sending...............: avg=37.97µs min=10.15µs  med=27.11µs max=101.56µs p(90)=67.28µs  p(95)=84.42µs 
     http_req_tls_handshaking.......: avg=0s      min=0s       med=0s      max=0s       p(90)=0s       p(95)=0s      
     http_req_waiting...............: avg=1.19ms  min=462.63µs med=922.3µs max=2.43ms   p(90)=2.11ms   p(95)=2.27ms  
     http_reqs......................: 10     0.997892/s
     iteration_duration.............: avg=1s      min=1s       med=1s      max=1s       p(90)=1s       p(95)=1s      
     iterations.....................: 10     0.997892/s
     vus............................: 1      min=1      max=1
     vus_max........................: 1      min=1      max=1


running (10.0s), 0/1 VUs, 10 complete and 0 interrupted iterations
default ✓ [======================================] 1 VUs  10s




5000 blocks -------------------

clearly able to see "fetching logs from inufra" output more in backend output
lasts quite a while, 3 minutes, but clearly no errors

i suspect the cache isn't working. duration 10s, means 10 tasks were executed.
api fetch to cache find should have 1-to-9 ratio.. ideally
but i dont see a single "cache found" output in backend

subsequent calls do fully utilize cache
but the first time k6 is kicked off (5000 blocks, duration 10s), cache isn't used

probably... cache wasn't written before other repeated calls tried to access those blocks

a2k@A2K:~/dev/rust/api2/k6$ k6 run 2-moreBlocks.js --duration 10s

          /\      |‾‾| /‾‾/   /‾‾/   
     /\  /  \     |  |/  /   /  /    
    /  \/    \    |     (   /   ‾‾\  
   /          \   |  |\  \ |  (‾)  | 
  / __________ \  |__| \__\ \_____/ .io

  execution: local
     script: 2-moreBlocks.js
     output: -

  scenarios: (100.00%) 1 scenario, 1 max VUs, 40s max duration (incl. graceful stop):
           * default: 1 looping VUs for 10s (gracefulStop: 30s)


     data_received..................: 2.7 kB 270 B/s
     data_sent......................: 1.5 kB 146 B/s
     http_req_blocked...............: avg=23.81µs min=2.91µs   med=5.71µs  max=181.87µs p(90)=28.49µs  p(95)=105.18µs
     http_req_connecting............: avg=12.23µs min=0s       med=0s      max=122.32µs p(90)=12.23µs  p(95)=67.27µs 
     http_req_duration..............: avg=1.39ms  min=586.11µs med=1.1ms   max=3.03ms   p(90)=2.43ms   p(95)=2.73ms  
       { expected_response:true }...: avg=1.39ms  min=586.11µs med=1.1ms   max=3.03ms   p(90)=2.43ms   p(95)=2.73ms  
     http_req_failed................: 0.00%  ✓ 0        ✗ 10 
     http_req_receiving.............: avg=97.42µs min=49.17µs  med=93.31µs max=172.04µs p(90)=152.88µs p(95)=162.46µs
     http_req_sending...............: avg=28.08µs min=11.26µs  med=24.05µs max=55.61µs  p(90)=50.72µs  p(95)=53.17µs 
     http_req_tls_handshaking.......: avg=0s      min=0s       med=0s      max=0s       p(90)=0s       p(95)=0s      
     http_req_waiting...............: avg=1.26ms  min=500.24µs med=1ms     max=2.87ms   p(90)=2.22ms   p(95)=2.55ms  
     http_reqs......................: 10     0.997791/s
     iteration_duration.............: avg=1s      min=1s       med=1s      max=1s       p(90)=1s       p(95)=1s      
     iterations.....................: 10     0.997791/s
     vus............................: 1      min=1      max=1
     vus_max........................: 1      min=1      max=1


running (10.0s), 0/1 VUs, 10 complete and 0 interrupted iterations
default ✓ [======================================] 1 VUs  10s
